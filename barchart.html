<!doctype html>
<html>
<head>
		
	<script src="https://d396qusza40orc.cloudfront.net/startup%2Fcode%2Fjquery.js"></script>
	<script src="charts/Chart.js"></script>
	<script type='text/javascript' src='knockout-2.3.0.js'></script>
	
</head>
<body>
	
	<div>
		<canvas id="canvas" height="450" width="600"></canvas>
	</div>
	
	<div>
		<button data-bind="click: function(){ loadDataset(1) }">Dataset 1</button>&nbsp;
		<button data-bind="click: function(){ loadDataset(2) }">Dataset 2</button>
	</div>
	
 
	<script type="text/javascript">
	
	function MainViewModel(data) {
		var self = this;
		var ctx = $("#canvas").get(0).getContext("2d");
		
		self.lineChartData = ko.observable();
		
		self.loadDataset = function(id) {
			$.get("/data/"+id, function(data) {
				self.lineChartData(data);	
				var myLine = new Chart(ctx).Line( vm.lineChartData() );
			});
		}
		
	}
	
	var vm = new MainViewModel();
	ko.applyBindings(vm);
	vm.loadDataset(1);
	
	</script>
	
</body>
</html>